# ==============================================
# WFMS Gateway Configuration
# Copy this file to .env and customize
# ==============================================

# -------------------- UART --------------------
# Windows: COM13, COM8, etc.
# Linux: /dev/ttyUSB0, /dev/ttyACM0, etc.
# macOS: /dev/cu.usbserial-*
UART_PORT=COM13
UART_BAUD=115200

# -------------------- MQTT --------------------
MQTT_HOST=127.0.0.1
MQTT_PORT=1883

# Leave empty if broker doesn't require auth
MQTT_USER=wfms_user
MQTT_PASS=changeme

# Site identifier (used in MQTT topic: wfms/{SITE}/...)
SITE=lab1

# -------------------- RULES --------------------
# Lock mode: 0=disabled, 1=enabled (reject all valve commands)
RULE_LOCK=0

# Per-user cooldown: minimum seconds between commands from same user
RULE_COOLDOWN_USER_S=3

# Global cooldown: minimum seconds between ANY commands
RULE_COOLDOWN_GLOBAL_S=1

# Deduplication TTL: ignore duplicate commands within this window
RULE_DEDUPE_TTL_S=60

# ACK timeout: seconds to wait for @ACK from Coordinator
ACK_TIMEOUT_S=3

# -------------------- ADMIN API --------------------
# Local Admin API (localhost only for security)
API_HOST=127.0.0.1
API_PORT=8080

# Admin API Token (required for POST requests)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Leave empty to DISABLE token auth (for local dev only)
API_TOKEN=

# -------------------- LOGGING --------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path (leave empty to disable file logging)
LOG_FILE=gateway.log
